
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <title>Recursion Visualizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <style>
    .node, .edge, .node text {
      visibility: hidden;
    }
    .node.activated text:first-of-type {
      visibility: visible;
    }
    .node.activated path {
      visibility: visible;
    }
    .node text.activated {
      visibility: visible;
    }
    .edge.activated {
      visibility: visible;
    }
    .svg-controls {
      width: 600px;
      display: grid;
      grid-template-rows: 1fr;
      grid-template-columns: 100px 1fr 100px;
      grid-gap: 8px;
      position: fixed;
      right: 0;
      top: 0;
      background: #80808070;
    }
    .svg-controls button:first-of-type {
      grid-row: 1;
      grid-column: 1;
    }
    .svg-controls input {
      grid-row: 1;
      grid-column: 2;
    }
    .svg-controls button:last-of-type {
      grid-row: 1;
      grid-column: 3;
    }
    </style>
  </head>
  <body>
   <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.49.0 (20210828.1703)
 -->
<!-- Pages: 1 -->
<svg width="69pt" height="402pt"
 viewBox="0.00 0.00 69.00 402.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 398)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-398 65,-398 65,4 -4,4"/>
<!-- 140268176730032 -->
<g id="node1" class="node">
<title>140268176730032</title>
<path fill="none" stroke="black" d="M12,-267.5C12,-267.5 42,-267.5 42,-267.5 48,-267.5 54,-273.5 54,-279.5 54,-279.5 54,-292.5 54,-292.5 54,-298.5 48,-304.5 42,-304.5 42,-304.5 12,-304.5 12,-304.5 6,-304.5 0,-298.5 0,-292.5 0,-292.5 0,-279.5 0,-279.5 0,-273.5 6,-267.5 12,-267.5"/>
<text text-anchor="middle" x="27" y="-282.6" font-family="Times,serif" font-size="13.00">fact(3)</text>
</g>
<!-- 140268176708800 -->
<g id="node2" class="node">
<title>140268176708800</title>
<path fill="none" stroke="black" d="M12,-178.5C12,-178.5 42,-178.5 42,-178.5 48,-178.5 54,-184.5 54,-190.5 54,-190.5 54,-203.5 54,-203.5 54,-209.5 48,-215.5 42,-215.5 42,-215.5 12,-215.5 12,-215.5 6,-215.5 0,-209.5 0,-203.5 0,-203.5 0,-190.5 0,-190.5 0,-184.5 6,-178.5 12,-178.5"/>
<text text-anchor="middle" x="27" y="-193.6" font-family="Times,serif" font-size="13.00">fact(2)</text>
</g>
<!-- 140268176730032&#45;&gt;140268176708800 -->
<g id="edge1" class="edge">
<title>140268176730032&#45;&gt;140268176708800</title>
<path fill="none" stroke="black" d="M16.08,-267.31C11.38,-257.61 7.47,-245.29 10,-234 10.67,-230.99 11.63,-227.94 12.75,-224.96"/>
<polygon fill="black" stroke="black" points="15.97,-226.32 16.72,-215.75 9.54,-223.55 15.97,-226.32"/>
<text text-anchor="middle" x="17" y="-239.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#1)</text>
</g>
<!-- 140268176730032&#45;&gt;140268176708800 -->
<g id="edge2" class="edge">
<title>140268176730032&#45;&gt;140268176708800:c</title>
<path fill="none" stroke="green" d="M27,-256.99C27,-243.5 27,-227.69 27,-215.69"/>
<polygon fill="green" stroke="green" points="23.5,-257.19 27,-267.19 30.5,-257.19 23.5,-257.19"/>
<text text-anchor="middle" x="44" y="-237.8" font-family="Times,serif" font-size="14.00">2 (#6)</text>
</g>
<!-- 140268176651776 -->
<g id="node3" class="node">
<title>140268176651776</title>
<path fill="none" stroke="black" d="M12,-89.5C12,-89.5 42,-89.5 42,-89.5 48,-89.5 54,-95.5 54,-101.5 54,-101.5 54,-114.5 54,-114.5 54,-120.5 48,-126.5 42,-126.5 42,-126.5 12,-126.5 12,-126.5 6,-126.5 0,-120.5 0,-114.5 0,-114.5 0,-101.5 0,-101.5 0,-95.5 6,-89.5 12,-89.5"/>
<text text-anchor="middle" x="27" y="-104.6" font-family="Times,serif" font-size="13.00">fact(1)</text>
</g>
<!-- 140268176708800&#45;&gt;140268176651776 -->
<g id="edge3" class="edge">
<title>140268176708800&#45;&gt;140268176651776</title>
<path fill="none" stroke="black" d="M16.72,-178.25C13.98,-172.6 11.39,-166.2 10,-160 8.22,-152.06 9.62,-143.61 12.25,-135.92"/>
<polygon fill="black" stroke="black" points="15.48,-137.27 16.08,-126.69 9.02,-134.58 15.48,-137.27"/>
<text text-anchor="middle" x="17" y="-150.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#2)</text>
</g>
<!-- 140268176708800&#45;&gt;140268176651776 -->
<g id="edge4" class="edge">
<title>140268176708800&#45;&gt;140268176651776:c</title>
<path fill="none" stroke="green" d="M27,-167.99C27,-154.5 27,-138.69 27,-126.69"/>
<polygon fill="green" stroke="green" points="23.5,-168.19 27,-178.19 30.5,-168.19 23.5,-168.19"/>
<text text-anchor="middle" x="44" y="-148.8" font-family="Times,serif" font-size="14.00">1 (#5)</text>
</g>
<!-- 140269251428992 -->
<g id="node4" class="node">
<title>140269251428992</title>
<path fill="none" stroke="black" d="M12,-0.5C12,-0.5 42,-0.5 42,-0.5 48,-0.5 54,-6.5 54,-12.5 54,-12.5 54,-25.5 54,-25.5 54,-31.5 48,-37.5 42,-37.5 42,-37.5 12,-37.5 12,-37.5 6,-37.5 0,-31.5 0,-25.5 0,-25.5 0,-12.5 0,-12.5 0,-6.5 6,-0.5 12,-0.5"/>
<text text-anchor="middle" x="27" y="-15.6" font-family="Times,serif" font-size="13.00">fact(0)</text>
</g>
<!-- 140268176651776&#45;&gt;140269251428992 -->
<g id="edge5" class="edge">
<title>140268176651776&#45;&gt;140269251428992</title>
<path fill="none" stroke="black" d="M16.72,-89.25C13.98,-83.6 11.39,-77.2 10,-71 8.22,-63.06 9.62,-54.61 12.25,-46.92"/>
<polygon fill="black" stroke="black" points="15.48,-48.27 16.08,-37.69 9.02,-45.58 15.48,-48.27"/>
<text text-anchor="middle" x="17" y="-61.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#3)</text>
</g>
<!-- 140268176651776&#45;&gt;140269251428992 -->
<g id="edge6" class="edge">
<title>140268176651776&#45;&gt;140269251428992:c</title>
<path fill="none" stroke="green" d="M27,-78.99C27,-65.5 27,-49.69 27,-37.69"/>
<polygon fill="green" stroke="green" points="23.5,-79.19 27,-89.19 30.5,-79.19 23.5,-79.19"/>
<text text-anchor="middle" x="44" y="-59.8" font-family="Times,serif" font-size="14.00">1 (#4)</text>
</g>
<!-- 99999999 -->
<g id="node5" class="node">
<title>99999999</title>
<path fill="none" stroke="black" d="M12,-356.5C12,-356.5 42,-356.5 42,-356.5 48,-356.5 54,-362.5 54,-368.5 54,-368.5 54,-381.5 54,-381.5 54,-387.5 48,-393.5 42,-393.5 42,-393.5 12,-393.5 12,-393.5 6,-393.5 0,-387.5 0,-381.5 0,-381.5 0,-368.5 0,-368.5 0,-362.5 6,-356.5 12,-356.5"/>
<text text-anchor="middle" x="27" y="-371.6" font-family="Times,serif" font-size="13.00">Result</text>
</g>
<!-- 99999999&#45;&gt;140268176730032 -->
<g id="edge7" class="edge">
<title>99999999&#45;&gt;140268176730032:c</title>
<path fill="none" stroke="green" d="M27,-345.99C27,-332.5 27,-316.69 27,-304.69"/>
<polygon fill="green" stroke="green" points="23.5,-346.19 27,-356.19 30.5,-346.19 23.5,-346.19"/>
<text text-anchor="middle" x="44" y="-326.8" font-family="Times,serif" font-size="14.00">6 (#7)</text>
</g>
</g>
</svg>



    <script>
    
        class RecursiveTreeViz {
          
          constructor(svg, options) {
            this.svg = svg;
            options = options || {};
            this.startStep = options.startStep;
            this.steps = [];
            this.frames = {};
          }
          
          draw() {
            // Store all the frames
            const frames = this.svg.querySelectorAll(".node");
            for (var i = 0; i < frames.length; i++) {
              const frame = frames[i];
              const frameId = frame.getElementsByTagName("title")[0].textContent;
              this.frames[frameId] = frame;
            }
        
            // Determine number of steps
            const edges = this.svg.querySelectorAll(".edge");
            for (let i = 0; i < edges.length; i++) {
              const edge = edges[i];
              const edgeTitle = edge.getElementsByTagName("title")[0].textContent;
              const edgeText = edge.getElementsByTagName("text")[0].textContent;

              let stepNum, isReturn;
              stepNum = parseInt(edgeText.split("(#")[1], 10); 
              if (edgeTitle.endsWith(":c")) {
                isReturn = true;
                edge.getElementsByTagName("text")[0].textContent = edgeText.split("(#")[0];
              } else {
                edge.getElementsByTagName("text")[0].textContent = "";
                isReturn = false;
              }
              const edgeFrames = edgeTitle.split(":c")[0];
              const parentFrameId = edgeFrames.split("->")[0];
              const childFrameId = edgeFrames.split("->")[1];
              this.steps[stepNum] = {
                parentFrame: this.frames[parentFrameId],
                childFrame: this.frames[childFrameId],
                edge: edge,
                isReturn: isReturn
              };
            }
              
            if (this.startStep == null || isNaN(this.startStep)) {
              this.currentStep = this.steps.length - 1;
            } else {
              this.currentStep = this.startStep;
            }
            this.drawControls();
            this.toggleSteps();
          }
          
          
          drawControls() {
            var controlsDiv = document.createElement("div");
            controlsDiv.classList.add("svg-controls");
            
            this.prevButton = document.createElement("button");
            this.prevButton.innerText = "< Prev";
            if (this.currentStep <= 0) {
              this.prevButton.setAttribute("disabled", "disabled");
            }
            this.prevButton.addEventListener("click", this.onPrevClick.bind(this));
            document.addEventListener("keypress", (e) => {
                if (e.key == "p" || e.key == "ArrowLeft") {
                  this.onPrevClick();
                } else if (e.key == "n" || e.key == "ArrowRight") {
                  this.onNextClick();
                }
            }); 
            
            this.nextButton = document.createElement("button");
            this.nextButton.innerText = "> Next";
            if (this.currentStep >= this.steps.length - 1) {
              this.nextButton.setAttribute("disabled", "disabled");
            }
            this.nextButton.addEventListener("click", this.onNextClick.bind(this));
        
            this.slider = document.createElement("input");
            this.slider.setAttribute("type", "range");
            this.slider.setAttribute("min", 0);
            this.slider.setAttribute("max", this.steps.length - 1);
            this.slider.setAttribute("value", this.currentStep);
            this.slider.addEventListener("change", this.onSliderChange.bind(this));
        
            controlsDiv.appendChild(this.prevButton);
            controlsDiv.appendChild(this.slider);
            controlsDiv.appendChild(this.nextButton);
        
            this.svg.after(controlsDiv);
          }
        
          toggleSteps() {
            this.steps.forEach((step, stepI) => {
              if (stepI == 1) {
                 step.parentFrame && step.parentFrame.classList.add("activated");
              }
              if (stepI <= this.currentStep) {
                 step.edge.classList.add("activated");
                 step.childFrame.classList.add("activated");
              } else {
                 step.edge.classList.remove("activated");
                 !step.isReturn && step.childFrame.classList.remove("activated");
              }
            })
          }
          
          onSliderChange(event) {
            this.currentStep = parseInt(event.target.value, 10);
            this.fixButtons();
            this.toggleSteps();
          }
        
          onPrevClick(event) {
            this.currentStep--;
            this.fixButtons();
            this.slider.value = this.currentStep;
            this.toggleSteps();
          }

          onNextClick(event) {
            this.currentStep++;
            this.fixButtons();
            this.slider.value = this.currentStep;
            this.toggleSteps();
          }
          
          fixButtons() {
            if (this.currentStep === 0) {
              this.prevButton.setAttribute("disabled", "disabled");
            }
            if (this.currentStep < this.steps.length - 1) {
              this.nextButton.removeAttribute("disabled");
            }
            if (this.currentStep > 0) {
              this.prevButton.removeAttribute("disabled");
            }
            if (this.currentStep === this.steps.length - 1) {
              this.nextButton.setAttribute("disabled", "disabled");
            }
          }
        }
        
        new RecursiveTreeViz(document.getElementsByTagName("svg")[0]).draw()

        </script>
  </body>
</html>

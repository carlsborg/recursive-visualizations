<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <title>Recursion Visualizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <style>
    .node, .edge, .node text {
      visibility: hidden;
    }
    .node.activated text:first-of-type {
      visibility: visible;
    }
    .node.activated path {
      visibility: visible;
    }
    .node text.activated {
      visibility: visible;
    }
    .edge.activated {
      visibility: visible;
    }
    .svg-controls {
      width: 600px;
      display: grid;
      grid-template-rows: 1fr;
      grid-template-columns: 100px 1fr 100px;
      grid-gap: 8px;
      position: fixed;
      right: 0;
      top: 0;
      background: #80808070;
    }
    .svg-controls button:first-of-type {
      grid-row: 1;
      grid-column: 1;
    }
    .svg-controls input {
      grid-row: 1;
      grid-column: 2;
    }
    .svg-controls button:last-of-type {
      grid-row: 1;
      grid-column: 3;
    }
    </style>
  </head>
  <body>
   <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.49.0 (20210828.1703)
 -->
<!-- Pages: 1 -->
<svg width="356pt" height="224pt"
 viewBox="0.00 0.00 356.00 224.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 220)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-220 352,-220 352,4 -4,4"/>
<!-- 140252381745632 -->
<g id="node1" class="node">
<title>140252381745632</title>
<path fill="none" stroke="black" d="M12,-0.5C12,-0.5 134,-0.5 134,-0.5 140,-0.5 146,-6.5 146,-12.5 146,-12.5 146,-25.5 146,-25.5 146,-31.5 140,-37.5 134,-37.5 134,-37.5 12,-37.5 12,-37.5 6,-37.5 0,-31.5 0,-25.5 0,-25.5 0,-12.5 0,-12.5 0,-6.5 6,-0.5 12,-0.5"/>
<text text-anchor="middle" x="73" y="-15.6" font-family="Times,serif" font-size="13.00">sprout_leaves([2], [4, 5])</text>
</g>
<!-- 140251306129104 -->
<g id="node2" class="node">
<title>140251306129104</title>
<path fill="none" stroke="black" d="M194,-0.5C194,-0.5 316,-0.5 316,-0.5 322,-0.5 328,-6.5 328,-12.5 328,-12.5 328,-25.5 328,-25.5 328,-31.5 322,-37.5 316,-37.5 316,-37.5 194,-37.5 194,-37.5 188,-37.5 182,-31.5 182,-25.5 182,-25.5 182,-12.5 182,-12.5 182,-6.5 188,-0.5 194,-0.5"/>
<text text-anchor="middle" x="255" y="-15.6" font-family="Times,serif" font-size="13.00">sprout_leaves([3], [4, 5])</text>
</g>
<!-- 140251842498304 -->
<g id="node3" class="node">
<title>140251842498304</title>
<path fill="none" stroke="black" d="M81,-89.5C81,-89.5 247,-89.5 247,-89.5 253,-89.5 259,-95.5 259,-101.5 259,-101.5 259,-114.5 259,-114.5 259,-120.5 253,-126.5 247,-126.5 247,-126.5 81,-126.5 81,-126.5 75,-126.5 69,-120.5 69,-114.5 69,-114.5 69,-101.5 69,-101.5 69,-95.5 75,-89.5 81,-89.5"/>
<text text-anchor="middle" x="164" y="-104.6" font-family="Times,serif" font-size="13.00">sprout_leaves([1, [2], [3]], [4, 5])</text>
</g>
<!-- 140251842498304&#45;&gt;140252381745632 -->
<g id="edge2" class="edge">
<title>140251842498304&#45;&gt;140252381745632</title>
<path fill="none" stroke="black" d="M92.31,-89.42C84.33,-84.67 77.22,-78.65 72,-71 67.37,-64.21 66.22,-55.64 66.65,-47.47"/>
<polygon fill="black" stroke="black" points="70.13,-47.86 67.89,-37.51 63.18,-47 70.13,-47.86"/>
<text text-anchor="middle" x="79" y="-61.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#1)</text>
</g>
<!-- 140251842498304&#45;&gt;140252381745632 -->
<g id="edge3" class="edge">
<title>140251842498304&#45;&gt;140252381745632:c</title>
<path fill="none" stroke="green" d="M124.06,-83.54C118.74,-79.66 113.56,-75.44 109,-71 98.93,-61.19 89.93,-48.19 83.45,-37.64"/>
<polygon fill="green" stroke="green" points="122.25,-86.53 132.46,-89.33 126.22,-80.77 122.25,-86.53"/>
<text text-anchor="middle" x="154" y="-59.8" font-family="Times,serif" font-size="14.00">[2, [4], [5]] (#2)</text>
</g>
<!-- 140251842498304&#45;&gt;140251306129104 -->
<g id="edge4" class="edge">
<title>140251842498304&#45;&gt;140251306129104</title>
<path fill="none" stroke="black" d="M182.42,-89.39C195.86,-76.54 214.26,-58.94 229.18,-44.69"/>
<polygon fill="black" stroke="black" points="231.8,-47.02 236.61,-37.58 226.97,-41.96 231.8,-47.02"/>
<text text-anchor="middle" x="222" y="-61.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#3)</text>
</g>
<!-- 140251842498304&#45;&gt;140251306129104 -->
<g id="edge5" class="edge">
<title>140251842498304&#45;&gt;140251306129104:c</title>
<path fill="none" stroke="green" d="M217.33,-84.16C223.06,-80.32 228.45,-75.94 233,-71 241.64,-61.63 247.18,-48.37 250.54,-37.58"/>
<polygon fill="green" stroke="green" points="215.45,-81.21 208.76,-89.43 219.11,-87.18 215.45,-81.21"/>
<text text-anchor="middle" x="288" y="-59.8" font-family="Times,serif" font-size="14.00">[3, [4], [5]] (#4)</text>
</g>
<!-- 99999999 -->
<g id="node4" class="node">
<title>99999999</title>
<path fill="none" stroke="black" d="M149,-178.5C149,-178.5 179,-178.5 179,-178.5 185,-178.5 191,-184.5 191,-190.5 191,-190.5 191,-203.5 191,-203.5 191,-209.5 185,-215.5 179,-215.5 179,-215.5 149,-215.5 149,-215.5 143,-215.5 137,-209.5 137,-203.5 137,-203.5 137,-190.5 137,-190.5 137,-184.5 143,-178.5 149,-178.5"/>
<text text-anchor="middle" x="164" y="-193.6" font-family="Times,serif" font-size="13.00">Result</text>
</g>
<!-- 99999999&#45;&gt;140251842498304 -->
<g id="edge6" class="edge">
<title>99999999&#45;&gt;140251842498304:c</title>
<path fill="none" stroke="green" d="M164,-167.99C164,-154.5 164,-138.69 164,-126.69"/>
<polygon fill="green" stroke="green" points="160.5,-168.19 164,-178.19 167.5,-168.19 160.5,-168.19"/>
<text text-anchor="middle" x="256" y="-148.8" font-family="Times,serif" font-size="14.00">[1, [2, [4], [5]], [3, [4], [5]]] (#5)</text>
</g>
</g>
</svg>



    <script>
    
        class RecursiveTreeViz {
          
          constructor(svg, options) {
            this.svg = svg;
            options = options || {};
            this.startStep = options.startStep;
            this.steps = [];
            this.frames = {};
          }
          
          draw() {
            // Store all the frames
            const frames = this.svg.querySelectorAll(".node");
            for (var i = 0; i < frames.length; i++) {
              const frame = frames[i];
              const frameId = frame.getElementsByTagName("title")[0].textContent;
              this.frames[frameId] = frame;
            }
        
            // Determine number of steps
            const edges = this.svg.querySelectorAll(".edge");
            for (let i = 0; i < edges.length; i++) {
              const edge = edges[i];
              const edgeTitle = edge.getElementsByTagName("title")[0].textContent;
              const edgeText = edge.getElementsByTagName("text")[0].textContent;

              let stepNum, isReturn;
              stepNum = parseInt(edgeText.split("(#")[1], 10); 
              if (edgeTitle.endsWith(":c")) {
                isReturn = true;
                edge.getElementsByTagName("text")[0].textContent = edgeText.split("(#")[0];
              } else {
                edge.getElementsByTagName("text")[0].textContent = "";
                isReturn = false;
              }
              const edgeFrames = edgeTitle.split(":c")[0];
              const parentFrameId = edgeFrames.split("->")[0];
              const childFrameId = edgeFrames.split("->")[1];
              this.steps[stepNum] = {
                parentFrame: this.frames[parentFrameId],
                childFrame: this.frames[childFrameId],
                edge: edge,
                isReturn: isReturn
              };
            }
              
            if (this.startStep == null || isNaN(this.startStep)) {
              this.currentStep = this.steps.length - 1;
            } else {
              this.currentStep = this.startStep;
            }
            this.drawControls();
            this.toggleSteps();
          }
          
          
          drawControls() {
            var controlsDiv = document.createElement("div");
            controlsDiv.classList.add("svg-controls");
            
            this.prevButton = document.createElement("button");
            this.prevButton.innerText = "< Prev";
            if (this.currentStep <= 0) {
              this.prevButton.setAttribute("disabled", "disabled");
            }
            this.prevButton.addEventListener("click", this.onPrevClick.bind(this));
            
            this.nextButton = document.createElement("button");
            this.nextButton.innerText = "> Next";
            if (this.currentStep >= this.steps.length - 1) {
              this.nextButton.setAttribute("disabled", "disabled");
            }
            this.nextButton.addEventListener("click", this.onNextClick.bind(this));
        
            this.slider = document.createElement("input");
            this.slider.setAttribute("type", "range");
            this.slider.setAttribute("min", 0);
            this.slider.setAttribute("max", this.steps.length - 1);
            this.slider.setAttribute("value", this.currentStep);
            this.slider.addEventListener("change", this.onSliderChange.bind(this));
        
            controlsDiv.appendChild(this.prevButton);
            controlsDiv.appendChild(this.slider);
            controlsDiv.appendChild(this.nextButton);
        
            this.svg.after(controlsDiv);
          }
        
          toggleSteps() {
            console.log(this.steps);
            this.steps.forEach((step, stepI) => {
              if (stepI == 1) {
                 step.parentFrame && step.parentFrame.classList.add("activated");
              }
              if (stepI <= this.currentStep) {
                 step.edge.classList.add("activated");
                 step.childFrame.classList.add("activated");
              } else {
                 step.edge.classList.remove("activated");
                 !step.isReturn && step.childFrame.classList.remove("activated");
              }
            })
          }
          
          onSliderChange(event) {
            this.currentStep = parseInt(event.target.value, 10);
            this.fixButtons();
            this.toggleSteps();
          }
        
          onPrevClick(event) {
            this.currentStep--;
            this.fixButtons();
            this.slider.value = this.currentStep;
            this.toggleSteps();
          }

          onNextClick(event) {
            this.currentStep++;
            this.fixButtons();
            this.slider.value = this.currentStep;
            this.toggleSteps();
          }
          
          fixButtons() {
            if (this.currentStep === 0) {
              this.prevButton.setAttribute("disabled", "disabled");
            }
            if (this.currentStep < this.steps.length - 1) {
              this.nextButton.removeAttribute("disabled");
            }
            if (this.currentStep > 0) {
              this.prevButton.removeAttribute("disabled");
            }
            if (this.currentStep === this.steps.length - 1) {
              this.nextButton.setAttribute("disabled", "disabled");
            }
          }
        }
        
        new RecursiveTreeViz(document.getElementsByTagName("svg")[0]).draw()

        </script>
  </body>
</html>


<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <title>Recursion Visualizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <style>
    .node, .edge, .node text {
      visibility: hidden;
    }
    .node.activated text:first-of-type {
      visibility: visible;
    }
    .node.activated path {
      visibility: visible;
    }
    .node text.activated {
      visibility: visible;
    }
    .edge.activated {
      visibility: visible;
    }
    .svg-controls {
      width: 600px;
      display: grid;
      grid-template-rows: 1fr;
      grid-template-columns: 100px 1fr 100px;
      grid-gap: 8px;
      position: fixed;
      right: 0;
      top: 0;
      background: #80808070;
    }
    .svg-controls button:first-of-type {
      grid-row: 1;
      grid-column: 1;
    }
    .svg-controls input {
      grid-row: 1;
      grid-column: 2;
    }
    .svg-controls button:last-of-type {
      grid-row: 1;
      grid-column: 3;
    }
    </style>
  </head>
  <body>
   <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.49.0 (20210828.1703)
 -->
<!-- Pages: 1 -->
<svg width="270pt" height="313pt"
 viewBox="0.00 0.00 269.50 313.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 309)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-309 265.5,-309 265.5,4 -4,4"/>
<!-- 140251306112112 -->
<g id="node1" class="node">
<title>140251306112112</title>
<path fill="none" stroke="black" d="M12,-178.5C12,-178.5 191,-178.5 191,-178.5 197,-178.5 203,-184.5 203,-190.5 203,-190.5 203,-203.5 203,-203.5 203,-209.5 197,-215.5 191,-215.5 191,-215.5 12,-215.5 12,-215.5 6,-215.5 0,-209.5 0,-203.5 0,-203.5 0,-190.5 0,-190.5 0,-184.5 6,-178.5 12,-178.5"/>
<text text-anchor="middle" x="101.5" y="-193.6" font-family="Times,serif" font-size="13.00">sprout_leaves([1, [2, [3]]], [6, 1, 2])</text>
</g>
<!-- 140251842495488 -->
<g id="node2" class="node">
<title>140251842495488</title>
<path fill="none" stroke="black" d="M23,-89.5C23,-89.5 180,-89.5 180,-89.5 186,-89.5 192,-95.5 192,-101.5 192,-101.5 192,-114.5 192,-114.5 192,-120.5 186,-126.5 180,-126.5 180,-126.5 23,-126.5 23,-126.5 17,-126.5 11,-120.5 11,-114.5 11,-114.5 11,-101.5 11,-101.5 11,-95.5 17,-89.5 23,-89.5"/>
<text text-anchor="middle" x="101.5" y="-104.6" font-family="Times,serif" font-size="13.00">sprout_leaves([2, [3]], [6, 1, 2])</text>
</g>
<!-- 140251306112112&#45;&gt;140251842495488 -->
<g id="edge1" class="edge">
<title>140251306112112&#45;&gt;140251842495488</title>
<path fill="none" stroke="black" d="M91.22,-178.25C88.48,-172.6 85.89,-166.2 84.5,-160 82.72,-152.06 84.12,-143.61 86.75,-135.92"/>
<polygon fill="black" stroke="black" points="89.98,-137.27 90.58,-126.69 83.52,-134.58 89.98,-137.27"/>
<text text-anchor="middle" x="91.5" y="-150.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#1)</text>
</g>
<!-- 140251306112112&#45;&gt;140251842495488 -->
<g id="edge2" class="edge">
<title>140251306112112&#45;&gt;140251842495488:c</title>
<path fill="none" stroke="green" d="M101.5,-167.99C101.5,-154.5 101.5,-138.69 101.5,-126.69"/>
<polygon fill="green" stroke="green" points="98,-168.19 101.5,-178.19 105,-168.19 98,-168.19"/>
<text text-anchor="middle" x="170" y="-148.8" font-family="Times,serif" font-size="14.00">[2, [3, [6], [1], [2]]] (#4)</text>
</g>
<!-- 140251306113168 -->
<g id="node3" class="node">
<title>140251306113168</title>
<path fill="none" stroke="black" d="M34,-0.5C34,-0.5 169,-0.5 169,-0.5 175,-0.5 181,-6.5 181,-12.5 181,-12.5 181,-25.5 181,-25.5 181,-31.5 175,-37.5 169,-37.5 169,-37.5 34,-37.5 34,-37.5 28,-37.5 22,-31.5 22,-25.5 22,-25.5 22,-12.5 22,-12.5 22,-6.5 28,-0.5 34,-0.5"/>
<text text-anchor="middle" x="101.5" y="-15.6" font-family="Times,serif" font-size="13.00">sprout_leaves([3], [6, 1, 2])</text>
</g>
<!-- 140251842495488&#45;&gt;140251306113168 -->
<g id="edge3" class="edge">
<title>140251842495488&#45;&gt;140251306113168</title>
<path fill="none" stroke="black" d="M91.22,-89.25C88.48,-83.6 85.89,-77.2 84.5,-71 82.72,-63.06 84.12,-54.61 86.75,-46.92"/>
<polygon fill="black" stroke="black" points="89.98,-48.27 90.58,-37.69 83.52,-45.58 89.98,-48.27"/>
<text text-anchor="middle" x="91.5" y="-61.6" font-family="Times,serif" font-size="8.00" fill="#999999">(#2)</text>
</g>
<!-- 140251842495488&#45;&gt;140251306113168 -->
<g id="edge4" class="edge">
<title>140251842495488&#45;&gt;140251306113168:c</title>
<path fill="none" stroke="green" d="M101.5,-78.99C101.5,-65.5 101.5,-49.69 101.5,-37.69"/>
<polygon fill="green" stroke="green" points="98,-79.19 101.5,-89.19 105,-79.19 98,-79.19"/>
<text text-anchor="middle" x="158.5" y="-59.8" font-family="Times,serif" font-size="14.00">[3, [6], [1], [2]] (#3)</text>
</g>
<!-- 99999999 -->
<g id="node4" class="node">
<title>99999999</title>
<path fill="none" stroke="black" d="M86.5,-267.5C86.5,-267.5 116.5,-267.5 116.5,-267.5 122.5,-267.5 128.5,-273.5 128.5,-279.5 128.5,-279.5 128.5,-292.5 128.5,-292.5 128.5,-298.5 122.5,-304.5 116.5,-304.5 116.5,-304.5 86.5,-304.5 86.5,-304.5 80.5,-304.5 74.5,-298.5 74.5,-292.5 74.5,-292.5 74.5,-279.5 74.5,-279.5 74.5,-273.5 80.5,-267.5 86.5,-267.5"/>
<text text-anchor="middle" x="101.5" y="-282.6" font-family="Times,serif" font-size="13.00">Result</text>
</g>
<!-- 99999999&#45;&gt;140251306112112 -->
<g id="edge5" class="edge">
<title>99999999&#45;&gt;140251306112112:c</title>
<path fill="none" stroke="green" d="M101.5,-256.99C101.5,-243.5 101.5,-227.69 101.5,-215.69"/>
<polygon fill="green" stroke="green" points="98,-257.19 101.5,-267.19 105,-257.19 98,-257.19"/>
<text text-anchor="middle" x="181.5" y="-237.8" font-family="Times,serif" font-size="14.00">[1, [2, [3, [6], [1], [2]]]] (#5)</text>
</g>
</g>
</svg>



    <script>
    
        class RecursiveTreeViz {
          
          constructor(svg, options) {
            this.svg = svg;
            options = options || {};
            this.startStep = options.startStep;
            this.steps = [];
            this.frames = {};
          }
          
          draw() {
            // Store all the frames
            const frames = this.svg.querySelectorAll(".node");
            for (var i = 0; i < frames.length; i++) {
              const frame = frames[i];
              const frameId = frame.getElementsByTagName("title")[0].textContent;
              this.frames[frameId] = frame;
            }
        
            // Determine number of steps
            const edges = this.svg.querySelectorAll(".edge");
            for (let i = 0; i < edges.length; i++) {
              const edge = edges[i];
              const edgeTitle = edge.getElementsByTagName("title")[0].textContent;
              const edgeText = edge.getElementsByTagName("text")[0].textContent;

              let stepNum, isReturn;
              stepNum = parseInt(edgeText.split("(#")[1], 10); 
              if (edgeTitle.endsWith(":c")) {
                isReturn = true;
                edge.getElementsByTagName("text")[0].textContent = edgeText.split("(#")[0];
              } else {
                edge.getElementsByTagName("text")[0].textContent = "";
                isReturn = false;
              }
              const edgeFrames = edgeTitle.split(":c")[0];
              const parentFrameId = edgeFrames.split("->")[0];
              const childFrameId = edgeFrames.split("->")[1];
              this.steps[stepNum] = {
                parentFrame: this.frames[parentFrameId],
                childFrame: this.frames[childFrameId],
                edge: edge,
                isReturn: isReturn
              };
            }
              
            if (this.startStep == null || isNaN(this.startStep)) {
              this.currentStep = this.steps.length - 1;
            } else {
              this.currentStep = this.startStep;
            }
            this.drawControls();
            this.toggleSteps();
          }
          
          
          drawControls() {
            var controlsDiv = document.createElement("div");
            controlsDiv.classList.add("svg-controls");
            
            this.prevButton = document.createElement("button");
            this.prevButton.innerText = "< Prev";
            if (this.currentStep <= 0) {
              this.prevButton.setAttribute("disabled", "disabled");
            }
            this.prevButton.addEventListener("click", this.onPrevClick.bind(this));
            
            this.nextButton = document.createElement("button");
            this.nextButton.innerText = "> Next";
            if (this.currentStep >= this.steps.length - 1) {
              this.nextButton.setAttribute("disabled", "disabled");
            }
            this.nextButton.addEventListener("click", this.onNextClick.bind(this));
        
            this.slider = document.createElement("input");
            this.slider.setAttribute("type", "range");
            this.slider.setAttribute("min", 0);
            this.slider.setAttribute("max", this.steps.length - 1);
            this.slider.setAttribute("value", this.currentStep);
            this.slider.addEventListener("change", this.onSliderChange.bind(this));
        
            controlsDiv.appendChild(this.prevButton);
            controlsDiv.appendChild(this.slider);
            controlsDiv.appendChild(this.nextButton);
        
            this.svg.after(controlsDiv);
          }
        
          toggleSteps() {
            console.log(this.steps);
            this.steps.forEach((step, stepI) => {
              if (stepI == 1) {
                 step.parentFrame && step.parentFrame.classList.add("activated");
              }
              if (stepI <= this.currentStep) {
                 step.edge.classList.add("activated");
                 step.childFrame.classList.add("activated");
              } else {
                 step.edge.classList.remove("activated");
                 !step.isReturn && step.childFrame.classList.remove("activated");
              }
            })
          }
          
          onSliderChange(event) {
            this.currentStep = parseInt(event.target.value, 10);
            this.fixButtons();
            this.toggleSteps();
          }
        
          onPrevClick(event) {
            this.currentStep--;
            this.fixButtons();
            this.slider.value = this.currentStep;
            this.toggleSteps();
          }

          onNextClick(event) {
            this.currentStep++;
            this.fixButtons();
            this.slider.value = this.currentStep;
            this.toggleSteps();
          }
          
          fixButtons() {
            if (this.currentStep === 0) {
              this.prevButton.setAttribute("disabled", "disabled");
            }
            if (this.currentStep < this.steps.length - 1) {
              this.nextButton.removeAttribute("disabled");
            }
            if (this.currentStep > 0) {
              this.prevButton.removeAttribute("disabled");
            }
            if (this.currentStep === this.steps.length - 1) {
              this.nextButton.setAttribute("disabled", "disabled");
            }
          }
        }
        
        new RecursiveTreeViz(document.getElementsByTagName("svg")[0]).draw()

        </script>
  </body>
</html>
